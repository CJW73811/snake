<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>背景音乐示例</title>
    <!-- 引入Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- 配置Tailwind自定义颜色和字体 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        dark: '#1E293B',
                        light: '#F8FAFC'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <!-- 自定义工具类 -->
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .music-btn {
                @apply w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 ease-in-out shadow-lg hover:shadow-xl transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary/50;
            }
            .volume-slider {
                @apply w-32 md:w-40 h-2 rounded-full appearance-none cursor-pointer bg-gray-300 dark:bg-gray-700 outline-none;
            }
            .volume-slider::-webkit-slider-thumb {
                @apply appearance-none w-5 h-5 rounded-full bg-primary transition-all duration-200 hover:scale-120;
            }
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-light to-gray-200 dark:from-dark dark:to-gray-900 transition-colors duration-300">
    <!-- 页面内容容器 -->
    <div class="container mx-auto px-4 py-12 flex flex-col items-center justify-center min-h-screen">
        <!-- 主标题 -->
        <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold text-center text-dark dark:text-light mb-8 tracking-tight">
            背景音乐体验
        </h1>
        
        <!-- 主图片展示区 -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-4xl mb-12">
            <div class="rounded-xl overflow-hidden shadow-2xl transform transition-all duration-500 hover:-translate-y-2 hover:shadow-3xl">
                <img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/98cb039bf02545bfb4d9afcfb6739ae6.png~tplv-a9rns2rl98-24:720:720.png?rk3s=1fb89129&x-expires=1758551280&x-signature=HSldd%2B6hxGinZJZSRrsQUDcrpIk%3D" 
                     alt="风景图片1" 
                     class="w-full h-auto object-cover">
            </div>
            <div class="rounded-xl overflow-hidden shadow-2xl transform transition-all duration-500 hover:-translate-y-2 hover:shadow-3xl">
                <img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/72f776b97c5b49a2953b26671c71b4ce.png~tplv-a9rns2rl98-24:720:720.png?rk3s=1fb89129&x-expires=1758553050&x-signature=b8pQPmumtUnrAW13MG57LqlbQjE%3D" 
                     alt="风景图片2" 
                     class="w-full h-auto object-cover">
            </div>
            <div class="rounded-xl overflow-hidden shadow-2xl transform transition-all duration-500 hover:-translate-y-2 hover:shadow-3xl">
                <img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/92bc18b8344e4b70ad85e15d675c63f0.png~tplv-a9rns2rl98-24:720:720.png?rk3s=1fb89129&x-expires=1758554090&x-signature=%2FUrxZZJrD2ht%2FAa9K5B%2Fg00frsk%3D" 
                     alt="风景图片3" 
                     class="w-full h-auto object-cover">
            </div>
        </div>
        
        <!-- 音乐控制器 -->
        <div class="bg-white/80 dark:bg-dark/80 backdrop-blur-md rounded-2xl p-6 w-full max-w-md shadow-xl border border-gray-200 dark:border-gray-800">
            <div class="flex flex-col items-center space-y-6">
                <!-- 音乐信息 -->
                <div class="text-center">
                    <h2 class="text-xl font-semibold text-dark dark:text-light mb-1">轻松背景音乐</h2>
                    <p class="text-gray-600 dark:text-gray-400 text-sm">舒缓的旋律 · 放松心情</p>
                </div>
                
                <!-- 进度条 -->
                <div class="w-full">
                    <div id="progress-bar" class="h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                        <div id="progress" class="h-full bg-primary w-0 transition-all duration-1000"></div>
                    </div>
                    <div class="flex justify-between text-xs text-gray-500 dark:text-gray-500 mt-1">
                        <span id="current-time">0:00</span>
                        <span id="total-time">0:00</span>
                    </div>
                </div>
                
                <!-- 控制按钮和音量 -->
                <div class="flex items-center justify-between w-full">
                    <!-- 音量控制 -->
                    <div class="flex items-center space-x-2">
                        <i id="volume-icon" class="fa fa-volume-up text-gray-700 dark:text-gray-300"></i>
                        <input type="range" id="volume-slider" class="volume-slider" min="0" max="1" step="0.05" value="0.7">
                    </div>
                    
                    <!-- 播放/暂停按钮 -->
                    <button id="play-pause-btn" class="music-btn bg-primary text-white">
                        <i id="play-icon" class="fa fa-play text-xl"></i>
                        <i id="pause-icon" class="fa fa-pause text-xl hidden"></i>
                    </button>
                    
                    <!-- 额外控制按钮 -->
                    <div class="w-12"></div> <!-- 占位，保持对称 -->
                </div>
            </div>
        </div>
        
        <!-- 主题切换按钮 -->
        <button id="theme-toggle" class="mt-8 music-btn bg-gray-200 dark:bg-gray-700 text-dark dark:text-light">
            <i class="fa fa-moon-o dark:hidden text-xl"></i>
            <i class="fa fa-sun-o hidden dark:block text-xl"></i>
        </button>
    </div>
    
    <!-- 音频元素 -->
    <audio id="background-music" loop>
        <!-- 使用示例音频，实际使用时替换为你的音乐文件 -->
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
        您的浏览器不支持音频播放
    </audio>
    
    <script>
        // 获取DOM元素
        const audio = document.getElementById('background-music');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const playIcon = document.getElementById('play-icon');
        const pauseIcon = document.getElementById('pause-icon');
        const volumeSlider = document.getElementById('volume-slider');
        const volumeIcon = document.getElementById('volume-icon');
        const progressBar = document.getElementById('progress');
        const currentTimeEl = document.getElementById('current-time');
        const totalTimeEl = document.getElementById('total-time');
        const themeToggle = document.getElementById('theme-toggle');
        
        // 播放/暂停功能
        playPauseBtn.addEventListener('click', () => {
            if (audio.paused) {
                audio.play().then(() => {
                    // 播放成功
                    playIcon.classList.add('hidden');
                    pauseIcon.classList.remove('hidden');
                    playPauseBtn.classList.remove('bg-primary');
                    playPauseBtn.classList.add('bg-secondary');
                }).catch(error => {
                    // 播放失败（通常是浏览器自动播放限制）
                    console.log('播放失败:', error);
                    alert('请点击播放按钮手动开始音乐（浏览器自动播放限制）');
                });
            } else {
                audio.pause();
                pauseIcon.classList.add('hidden');
                playIcon.classList.remove('hidden');
                playPauseBtn.classList.remove('bg-secondary');
                playPauseBtn.classList.add('bg-primary');
            }
        });
        
        // 音量控制
        volumeSlider.addEventListener('input', () => {
            audio.volume = volumeSlider.value;
            
            // 更新音量图标
            if (audio.volume === 0) {
                volumeIcon.className = 'fa fa-volume-off text-gray-700 dark:text-gray-300';
            } else if (audio.volume < 0.5) {
                volumeIcon.className = 'fa fa-volume-down text-gray-700 dark:text-gray-300';
            } else {
                volumeIcon.className = 'fa fa-volume-up text-gray-700 dark:text-gray-300';
            }
        });
        
        // 更新进度条和时间显示
        audio.addEventListener('timeupdate', () => {
            const progress = (audio.currentTime / audio.duration) * 100;
            progressBar.style.width = `${progress}%`;
            
            // 格式化当前时间
            currentTimeEl.textContent = formatTime(audio.currentTime);
            
            // 只有当音频元数据加载完成后才显示总时长
            if (audio.duration) {
                totalTimeEl.textContent = formatTime(audio.duration);
            }
        });
        
        // 时间格式化函数 (将秒转换为分:秒格式)
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${minutes}:${secs < 10 ? '0' + secs : secs}`;
        }
        
        // 点击进度条跳转到对应位置
        document.getElementById('progress-bar').addEventListener('click', (e) => {
            const rect = progressBar.getBoundingClientRect();
            const pos = (e.clientX - rect.left) / rect.width;
            audio.currentTime = pos * audio.duration;
        });
        
        // 主题切换
        themeToggle.addEventListener('click', () => {
            document.documentElement.classList.toggle('dark');
            
            // 保存主题偏好到本地存储
            if (document.documentElement.classList.contains('dark')) {
                localStorage.setItem('theme', 'dark');
            } else {
                localStorage.setItem('theme', 'light');
            }
        });
        
        // 检查用户主题偏好
        if (localStorage.getItem('theme') === 'dark' || 
            (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
        
        // 尝试自动播放（可能会被浏览器阻止）
        window.addEventListener('click', () => {
            if (audio.paused) {
                audio.play().catch(e => console.log('自动播放被阻止:', e));
            }
        }, { once: true });
    </script>
</body>
</html>
